#ifndef SPECTRUM_POOL_H
#define SPECTRUM_POOL_H

#include <boost/shared_ptr.hpp>
#define _USE_MATH_DEFINES
#include <math.h>
#include "position.h"
#include "point_microphone.h"
#include "pressure_spectrum.h"
#include "force_spectrum.h"
#include "mode_coefficient.h"
#include "dct_engine_factory.h"

namespace ARD
{
  class SpectrumPool
  {
  public:
    SpectrumPool(const Size& size, const double dt, const DCTEngineFactoryPointer engine_factory);
    PressureSpectrumPointer Update(const ForceSpectrumPointer force_spectrum);

  private:
    void TimeShift();

    PressureSpectrumPointer previous_, now_, next_;
    double dt_;
    static const double c;
  };

  typedef boost::shared_ptr<SpectrumPool> SpectrumPoolPointer;
}

#endif // SPECTRUM_POOL_H
